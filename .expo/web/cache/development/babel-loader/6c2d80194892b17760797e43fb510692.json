{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport React, { useState, useContext, useCallback } from 'react';\nimport { useFonts } from 'expo-font';\nimport { StatusBar } from 'expo-status-bar';\nimport 'react-native';\nimport { Container, Smartmobile, PurpleCircle, Entrar, Inputs, Input, ErrorMensage, SuccessMensage } from \"./styles/login\";\nimport { useNavigation, useFocusEffect } from '@react-navigation/native';\nimport { AuthenticationContext } from \"../context/authentication\";\nimport { ConfigContext } from \"../context/config\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\n\nfunction Login() {\n  var _useContext = useContext(AuthenticationContext),\n      LogIn = _useContext.LogIn;\n\n  var _useContext2 = useContext(ConfigContext),\n      baseUrl = _useContext2.baseUrl,\n      appInfo = _useContext2.appInfo,\n      setInfoApp = _useContext2.setInfoApp;\n\n  useFocusEffect(React.useCallback(function () {\n    fetch(\"http://\" + baseUrl + \"/\", {\n      method: 'GET',\n      headers: {\n        'Content-type': 'application/json; charset=UTF-8'\n      }\n    }).then(function (response) {\n      return response.json();\n    }).then(function (json) {\n      setInfoApp(json);\n    });\n  }, []));\n  var navigation = useNavigation();\n\n  var _useState = useState(''),\n      _useState2 = _slicedToArray(_useState, 2),\n      login = _useState2[0],\n      setLogin = _useState2[1];\n\n  var _useState3 = useState(''),\n      _useState4 = _slicedToArray(_useState3, 2),\n      senha = _useState4[0],\n      SetSenha = _useState4[1];\n\n  var _useState5 = useState({\n    status: false,\n    mnsg: ''\n  }),\n      _useState6 = _slicedToArray(_useState5, 2),\n      status = _useState6[0],\n      SetStatus = _useState6[1];\n\n  var _useFonts = useFonts({\n    MajorMonoDisplay: require(\"./fonts/MajorMonoDisplay-Regular.ttf\")\n  }),\n      _useFonts2 = _slicedToArray(_useFonts, 1),\n      loaded = _useFonts2[0];\n\n  if (!loaded) {\n    return null;\n  }\n\n  var Authenticator = function Authenticator() {\n    if (login == '' || senha == '') {\n      SetStatus({\n        status: true,\n        mnsg: 'Os campos de login e senha são obrigatórios'\n      });\n    } else {\n      fetch(\"http://\" + baseUrl + \"/auth/login\", {\n        method: 'POST',\n        body: JSON.stringify({\n          login: login,\n          password: senha\n        }),\n        headers: {\n          'Content-type': 'application/json; charset=UTF-8'\n        }\n      }).then(function (response) {\n        return response.json();\n      }).then(function (json) {\n        if (json.status == 1) {\n          SetStatus({\n            status: true,\n            mnsg: 'acesso não autorizado, login inexistente'\n          });\n        }\n\n        if (json.status == 2) {\n          SetStatus({\n            status: true,\n            mnsg: 'acesso não autorizado, senha incorreta'\n          });\n        }\n\n        if (json.status == 0) {\n          SetStatus({\n            status: false,\n            mnsg: 'Bem Vindo' + ' ' + json.infos.NOME\n          });\n          LogIn(json.infos);\n        }\n      });\n    }\n  };\n\n  return _jsxs(Container, {\n    children: [_jsx(StatusBar, {\n      backgroundColor: appInfo.cor_principal\n    }), _jsx(PurpleCircle, {\n      style: {\n        backgroundColor: appInfo.cor_principal\n      }\n    }), _jsxs(Smartmobile, {\n      style: {\n        color: appInfo.cor_principal,\n        fontFamily: 'MajorMonoDisplay'\n      },\n      children: [\" \", appInfo.nome_do_app, \" \"]\n    }), _jsxs(Inputs, {\n      children: [status.status == true ? _jsxs(ErrorMensage, {\n        children: [\" \", status.mnsg, \" \"]\n      }) : null, status.status == false ? _jsxs(SuccessMensage, {\n        children: [\" \", status.mnsg, \" \"]\n      }) : null, _jsx(Input, {\n        style: {\n          color: appInfo.cor_principal\n        },\n        name: login,\n        onChangeText: function onChangeText(t) {\n          return setLogin(t);\n        },\n        placeholder: \"Usu\\xE1rio\",\n        children: login\n      }), _jsx(Input, {\n        style: {\n          color: appInfo.cor_principal\n        },\n        name: senha,\n        secureTextEntry: true,\n        onChangeText: function onChangeText(t) {\n          return SetSenha(t);\n        },\n        placeholder: \"Senha\",\n        children: senha\n      }), _jsx(Entrar, {\n        style: {\n          backgroundColor: '#00000085'\n        },\n        onPress: Authenticator\n      })]\n    })]\n  });\n}\n\n;\nexport default Login;","map":{"version":3,"names":["React","useState","useContext","useCallback","useFonts","StatusBar","Container","Smartmobile","PurpleCircle","Entrar","Inputs","Input","ErrorMensage","SuccessMensage","useNavigation","useFocusEffect","AuthenticationContext","ConfigContext","Login","LogIn","baseUrl","appInfo","setInfoApp","fetch","method","headers","then","response","json","navigation","login","setLogin","senha","SetSenha","status","mnsg","SetStatus","MajorMonoDisplay","require","loaded","Authenticator","body","JSON","stringify","password","infos","NOME","cor_principal","backgroundColor","color","fontFamily","nome_do_app","t"],"sources":["C:/React N/SmartMobile/src/app/screens/inicio/login.js"],"sourcesContent":["import React, {useState, useContext, useCallback} from 'react';\r\nimport { useFonts } from 'expo-font';\r\nimport { StatusBar } from 'expo-status-bar';\r\nimport { } from 'react-native';\r\nimport { Container, Smartmobile, PurpleCircle, Entrar,  Inputs, Input, ErrorMensage, SuccessMensage} from \"./styles/login\";\r\nimport { useNavigation, useFocusEffect } from '@react-navigation/native';\r\nimport { AuthenticationContext } from '../context/authentication';\r\nimport { ConfigContext } from '../context/config';\r\n\r\n   function Login() {\r\n    const { LogIn } = useContext(AuthenticationContext)    \r\n    const { baseUrl, appInfo, setInfoApp } = useContext(ConfigContext)\r\n\r\n    useFocusEffect(\r\n      React.useCallback(() => {\r\n        fetch(`http://${baseUrl}/`, {\r\n          method: 'GET',\r\n          headers: {\r\n            'Content-type': 'application/json; charset=UTF-8',\r\n          },\r\n        })\r\n          .then((response) => response.json())\r\n          .then((json) => {\r\n            setInfoApp(json)               \r\n          });\r\n      }, [])\r\n    );\r\n    \r\n    const navigation = useNavigation(); // navigation\r\n    const [login, setLogin] = useState(''); \r\n    const [senha, SetSenha] = useState('');\r\n    const [status, SetStatus] = useState({ status: false, mnsg: ''}); \r\n  \r\n  const [loaded] = useFonts({\r\n    MajorMonoDisplay: require('./fonts/MajorMonoDisplay-Regular.ttf'),\r\n  });\r\n  \r\n  if (!loaded) {\r\n    return null;\r\n  }\r\n\r\n  const Authenticator = () => {\r\n\r\n    if( login == '' || senha == '' ) {\r\n\r\n      SetStatus({ status: true, mnsg: 'Os campos de login e senha são obrigatórios'})\r\n\r\n    }\r\n\r\n    else {\r\n     \r\n    fetch(`http://${baseUrl}/auth/login`, {\r\n      method: 'POST',\r\n      body: JSON.stringify({\r\n        login: login,\r\n        password: senha\r\n      }),\r\n      headers: {\r\n        'Content-type': 'application/json; charset=UTF-8',\r\n      },\r\n    })\r\n      .then((response) => response.json())\r\n      .then((json) => {\r\n\r\n        if(json.status == 1) {\r\n\r\n          SetStatus({ status: true, mnsg: 'acesso não autorizado, login inexistente'})          \r\n        }\r\n\r\n        if(json.status == 2) {         \r\n          SetStatus({ status: true, mnsg: 'acesso não autorizado, senha incorreta'})\r\n        }\r\n\r\n        if(json.status == 0) {\r\n          SetStatus({ status: false, mnsg: 'Bem Vindo' + ' ' + json.infos.NOME })\r\n          LogIn(json.infos)\r\n          \r\n        }\r\n      });\r\n    }\r\n      \r\n  }\r\n\r\n\r\n  \r\n    return (\r\n        <Container>\r\n          <StatusBar backgroundColor={appInfo.cor_principal}/>\r\n          <PurpleCircle style={{backgroundColor: appInfo.cor_principal }}/>            \r\n         <Smartmobile style={{ color: appInfo.cor_principal, fontFamily: 'MajorMonoDisplay' }}> {appInfo.nome_do_app} </Smartmobile>\r\n         <Inputs>\r\n         \r\n         {status.status == true? <ErrorMensage> {status.mnsg} </ErrorMensage> : null}\r\n         {status.status == false? <SuccessMensage> {status.mnsg} </SuccessMensage> : null}\r\n          <Input\r\n          style={{ color: appInfo.cor_principal }}\r\n          name={login}\r\n          onChangeText={(t) => setLogin(t)}\r\n          placeholder=\"Usuário\">{login}</Input>\r\n\r\n        <Input\r\n          style={{ color: appInfo.cor_principal }}\r\n          name={senha}\r\n          secureTextEntry={true}\r\n          onChangeText={(t) => SetSenha(t)}\r\n          placeholder=\"Senha\">{senha}</Input>\r\n\r\n         <Entrar style={{ backgroundColor: '#00000085' }} onPress={Authenticator}/>      \r\n         </Inputs> \r\n        </Container>\r\n    );\r\n  };\r\n\r\n\r\n  export default Login;"],"mappings":";AAAA,OAAOA,KAAP,IAAeC,QAAf,EAAyBC,UAAzB,EAAqCC,WAArC,QAAuD,OAAvD;AACA,SAASC,QAAT,QAAyB,WAAzB;AACA,SAASC,SAAT,QAA0B,iBAA1B;AACA,OAAgB,cAAhB;AACA,SAASC,SAAT,EAAoBC,WAApB,EAAiCC,YAAjC,EAA+CC,MAA/C,EAAwDC,MAAxD,EAAgEC,KAAhE,EAAuEC,YAAvE,EAAqFC,cAArF;AACA,SAASC,aAAT,EAAwBC,cAAxB,QAA8C,0BAA9C;AACA,SAASC,qBAAT;AACA,SAASC,aAAT;;;;AAEG,SAASC,KAAT,GAAiB;EAChB,kBAAkBhB,UAAU,CAACc,qBAAD,CAA5B;EAAA,IAAQG,KAAR,eAAQA,KAAR;;EACA,mBAAyCjB,UAAU,CAACe,aAAD,CAAnD;EAAA,IAAQG,OAAR,gBAAQA,OAAR;EAAA,IAAiBC,OAAjB,gBAAiBA,OAAjB;EAAA,IAA0BC,UAA1B,gBAA0BA,UAA1B;;EAEAP,cAAc,CACZf,KAAK,CAACG,WAAN,CAAkB,YAAM;IACtBoB,KAAK,aAAWH,OAAX,QAAuB;MAC1BI,MAAM,EAAE,KADkB;MAE1BC,OAAO,EAAE;QACP,gBAAgB;MADT;IAFiB,CAAvB,CAAL,CAMGC,IANH,CAMQ,UAACC,QAAD;MAAA,OAAcA,QAAQ,CAACC,IAAT,EAAd;IAAA,CANR,EAOGF,IAPH,CAOQ,UAACE,IAAD,EAAU;MACdN,UAAU,CAACM,IAAD,CAAV;IACD,CATH;EAUD,CAXD,EAWG,EAXH,CADY,CAAd;EAeA,IAAMC,UAAU,GAAGf,aAAa,EAAhC;;EACA,gBAA0Bb,QAAQ,CAAC,EAAD,CAAlC;EAAA;EAAA,IAAO6B,KAAP;EAAA,IAAcC,QAAd;;EACA,iBAA0B9B,QAAQ,CAAC,EAAD,CAAlC;EAAA;EAAA,IAAO+B,KAAP;EAAA,IAAcC,QAAd;;EACA,iBAA4BhC,QAAQ,CAAC;IAAEiC,MAAM,EAAE,KAAV;IAAiBC,IAAI,EAAE;EAAvB,CAAD,CAApC;EAAA;EAAA,IAAOD,MAAP;EAAA,IAAeE,SAAf;;EAEF,gBAAiBhC,QAAQ,CAAC;IACxBiC,gBAAgB,EAAEC,OAAO;EADD,CAAD,CAAzB;EAAA;EAAA,IAAOC,MAAP;;EAIA,IAAI,CAACA,MAAL,EAAa;IACX,OAAO,IAAP;EACD;;EAED,IAAMC,aAAa,GAAG,SAAhBA,aAAgB,GAAM;IAE1B,IAAIV,KAAK,IAAI,EAAT,IAAeE,KAAK,IAAI,EAA5B,EAAiC;MAE/BI,SAAS,CAAC;QAAEF,MAAM,EAAE,IAAV;QAAgBC,IAAI,EAAE;MAAtB,CAAD,CAAT;IAED,CAJD,MAMK;MAELZ,KAAK,aAAWH,OAAX,kBAAiC;QACpCI,MAAM,EAAE,MAD4B;QAEpCiB,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe;UACnBb,KAAK,EAAEA,KADY;UAEnBc,QAAQ,EAAEZ;QAFS,CAAf,CAF8B;QAMpCP,OAAO,EAAE;UACP,gBAAgB;QADT;MAN2B,CAAjC,CAAL,CAUGC,IAVH,CAUQ,UAACC,QAAD;QAAA,OAAcA,QAAQ,CAACC,IAAT,EAAd;MAAA,CAVR,EAWGF,IAXH,CAWQ,UAACE,IAAD,EAAU;QAEd,IAAGA,IAAI,CAACM,MAAL,IAAe,CAAlB,EAAqB;UAEnBE,SAAS,CAAC;YAAEF,MAAM,EAAE,IAAV;YAAgBC,IAAI,EAAE;UAAtB,CAAD,CAAT;QACD;;QAED,IAAGP,IAAI,CAACM,MAAL,IAAe,CAAlB,EAAqB;UACnBE,SAAS,CAAC;YAAEF,MAAM,EAAE,IAAV;YAAgBC,IAAI,EAAE;UAAtB,CAAD,CAAT;QACD;;QAED,IAAGP,IAAI,CAACM,MAAL,IAAe,CAAlB,EAAqB;UACnBE,SAAS,CAAC;YAAEF,MAAM,EAAE,KAAV;YAAiBC,IAAI,EAAE,cAAc,GAAd,GAAoBP,IAAI,CAACiB,KAAL,CAAWC;UAAtD,CAAD,CAAT;UACA3B,KAAK,CAACS,IAAI,CAACiB,KAAN,CAAL;QAED;MACF,CA3BH;IA4BC;EAEF,CAxCD;;EA4CE,OACI,MAAC,SAAD;IAAA,WACE,KAAC,SAAD;MAAW,eAAe,EAAExB,OAAO,CAAC0B;IAApC,EADF,EAEE,KAAC,YAAD;MAAc,KAAK,EAAE;QAACC,eAAe,EAAE3B,OAAO,CAAC0B;MAA1B;IAArB,EAFF,EAGC,MAAC,WAAD;MAAa,KAAK,EAAE;QAAEE,KAAK,EAAE5B,OAAO,CAAC0B,aAAjB;QAAgCG,UAAU,EAAE;MAA5C,CAApB;MAAA,gBAAwF7B,OAAO,CAAC8B,WAAhG;IAAA,EAHD,EAIC,MAAC,MAAD;MAAA,WAECjB,MAAM,CAACA,MAAP,IAAiB,IAAjB,GAAuB,MAAC,YAAD;QAAA,gBAAgBA,MAAM,CAACC,IAAvB;MAAA,EAAvB,GAAsE,IAFvE,EAGCD,MAAM,CAACA,MAAP,IAAiB,KAAjB,GAAwB,MAAC,cAAD;QAAA,gBAAkBA,MAAM,CAACC,IAAzB;MAAA,EAAxB,GAA2E,IAH5E,EAIC,KAAC,KAAD;QACA,KAAK,EAAE;UAAEc,KAAK,EAAE5B,OAAO,CAAC0B;QAAjB,CADP;QAEA,IAAI,EAAEjB,KAFN;QAGA,YAAY,EAAE,sBAACsB,CAAD;UAAA,OAAOrB,QAAQ,CAACqB,CAAD,CAAf;QAAA,CAHd;QAIA,WAAW,EAAC,YAJZ;QAAA,UAIuBtB;MAJvB,EAJD,EAUD,KAAC,KAAD;QACE,KAAK,EAAE;UAAEmB,KAAK,EAAE5B,OAAO,CAAC0B;QAAjB,CADT;QAEE,IAAI,EAAEf,KAFR;QAGE,eAAe,EAAE,IAHnB;QAIE,YAAY,EAAE,sBAACoB,CAAD;UAAA,OAAOnB,QAAQ,CAACmB,CAAD,CAAf;QAAA,CAJhB;QAKE,WAAW,EAAC,OALd;QAAA,UAKuBpB;MALvB,EAVC,EAiBA,KAAC,MAAD;QAAQ,KAAK,EAAE;UAAEgB,eAAe,EAAE;QAAnB,CAAf;QAAiD,OAAO,EAAER;MAA1D,EAjBA;IAAA,EAJD;EAAA,EADJ;AA0BD;;AAAA;AAGD,eAAetB,KAAf"},"metadata":{},"sourceType":"module"}